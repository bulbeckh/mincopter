<?xml version="1.0" ?>
<sdf version="1.9">
  <world name="test_imu">
    <physics name="1ms" type="ignore">
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1.0</real_time_factor>
    </physics>

    <plugin filename="gz-sim-physics-system"
      name="gz::sim::systems::Physics">
    </plugin>
    <plugin
      filename="gz-sim-sensors-system"
      name="gz::sim::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
    <plugin filename="gz-sim-user-commands-system"
      name="gz::sim::systems::UserCommands">
    </plugin>
    <plugin filename="gz-sim-scene-broadcaster-system"
      name="gz::sim::systems::SceneBroadcaster">
    </plugin>
    <plugin filename="gz-sim-imu-system"
      name="gz::sim::systems::Imu">
    </plugin>

    <plugin filename="gz-sim-air-pressure-system"
	name="gz::sim::systems::AirPressure">
    </plugin>

    <scene>
      <ambient>1.0 1.0 1.0</ambient>
      <background>0.8 0.8 0.8</background>
      <sky></sky>
    </scene>

    <spherical_coordinates>
      <latitude_deg>-35.363262</latitude_deg>
      <longitude_deg>149.165237</longitude_deg>
      <elevation>584</elevation>
      <heading_deg>0</heading_deg>
      <surface_model>EARTH_WGS84</surface_model>
    </spherical_coordinates>

    <light type="directional" name="sun">
      <cast_shadows>true</cast_shadows>
      <pose>0 0 10 0 0 0</pose>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.8 0.8 0.8 1</specular>
      <attenuation>
        <range>1000</range>
        <constant>0.9</constant>
        <linear>0.01</linear>
        <quadratic>0.001</quadratic>
      </attenuation>
      <direction>-0.5 0.1 -0.9</direction>
    </light>

    <model name="axes">
      <static>1</static>
      <link name="link">
        <visual name="r">
          <cast_shadows>0</cast_shadows>
          <pose>5 0 0.1 0 0 0</pose>
          <geometry>
            <box>
              <size>10 0.01 0.01</size>
            </box>
          </geometry>
          <material>
            <ambient>1 0 0 0.8</ambient>
            <diffuse>1 0 0 0.8</diffuse>
            <emissive>1 0 0 0.8</emissive>
            <specular>0.5 0.5 0.5 0.8</specular>
          </material>
        </visual>
        <visual name="g">
          <cast_shadows>0</cast_shadows>
          <pose>0 5 0.1 0 0 0</pose>
          <geometry>
            <box>
              <size>0.01 10 0.01</size>
            </box>
          </geometry>
          <material>
            <ambient>0 1 0 0.8</ambient>
            <diffuse>0 1 0 0.8</diffuse>
            <emissive>0 1 0 0.8</emissive>
            <specular>0.5 0.5 0.5 0.8</specular>
          </material>
        </visual>
        <visual name="b">
          <cast_shadows>0</cast_shadows>
          <pose>0 0 5.1 0 0 0</pose>
          <geometry>
            <box>
              <size>0.01 0.01 10</size>
            </box>
          </geometry>
          <material>
            <ambient>0 0 1 0.8</ambient>
            <diffuse>0 0 1 0.8</diffuse>
            <emissive>0 0 1 0.8</emissive>
            <specular>0.5 0.5 0.5 0.8</specular>
          </material>
        </visual>
      </link>
    </model>


	<model name="testimu_model">
		<static>false</static>
		<link name="anchor_link">
			<pose>0 0 0 0 0 0</pose>
		</link>

		<link name="imu_link">
			<pose>0 0 5 0 0 0</pose>
			<collision name="im_coll">
				<geometry>
					<box>
						<size>1 1 1</size>
					</box>
				</geometry>
			</collision>
			<inertial>
				<mass>1</mass>
				<inertia>
					<ixx>0.16</ixx>
					<iyy>0.16</iyy>
					<izz>0.16</izz>
				</inertia>
			</inertial>
			<visual name="im_visual">
				<geometry>
					<box>
						<size>1 1 1</size>
					</box>
				</geometry>
			</visual>
			<sensor name="imu_sensor_test" type="imu">
				<pose>0 0 0 0 0 0</pose>
				<always_on>1</always_on>
				<update_rate>1000.0</update_rate>
			</sensor>
		</link>

		<joint name="im_joint" type="ball">
			<parent>anchor_link</parent>
			<child>imu_link</child>
				<!--axis>0 0 1</axis-->
			<pose>0 0 0 0 0 0</pose>
		</joint>

		<joint name="worldfixed" type="fixed">
			<parent>world</parent>
			<child>anchor_link</child>
		</joint>
	</model>

	<model name="ground">
		<static>true</static>
  <link name="ground_link">
    <collision name="ground_collision">
      <geometry>
			<plane>
				<normal>0 0 1</normal>
				<size> 100 100 </size>
			</plane>
      </geometry>
    </collision>
    <visual name="ground_visual">
		<geometry>
			<plane>
				<normal>0 0 1</normal>
				<size> 100 100 </size>
			</plane>
      </geometry>
			  <material>
				<script>
				  <uri>file://media/materials/scripts/gazebo.material</uri>
				  <name>Gazebo/Grey</name>
				</script>
			  </material>
    </visual>
  </link>
	</model>

  </world>
</sdf>
